{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/observer/dep.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/utils.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\n// _c(\"div\",{id:'app'},'你好')\nexport function generate(el){\n    // 遍历树，将树拼接成字符串\n    let children = genChildren(el);\n    let code = `_c('${el.tag}',\n        ${ el.attrs.length ? genProps(el.attrs) : 'undefined' }\n        ${children?`,${children}`:''})`\n    return code\n}\n\n// 生成子元素\nfunction gen(el){\n    if(el.type == 1){\n        return generate(el)\n    }else {\n        let text = el.text\n        if(!defaultTagRE.test(text)){\n            return `_v('${text}')`;\n        }else{\n            // hello {{arr}} world  转换成  'hello'+ arr+ 'world'\n            let tokens = [];\n            let match;\n            let lastIndex = defaultTagRE.lastIndex = 0;\n\n            // 看有没有匹配到\n            while (match = defaultTagRE.exec(text)) {\n                let index = match.index; // 开始索引\n                if(index > lastIndex){\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n                }\n                // _c,_v,_s \n                // _c：创建一个元素\n                // _v：里面包含的是一个文本\n                // _s：里面是一个变量，使用JSON.string转换一下\n                // JSON.stringfy 目的，这里的{{arr}} arr变量可能是对象，\n                // 需要进行JSON.stringfy,不然转隐式化过来就是[object Object]\n                tokens.push(`_s(${match[1].trim()})`) \n                lastIndex = index + match[0].length\n            }\n            if(lastIndex < text.length){\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\n            }\n            return `_v(${tokens.join('+')})`\n        }\n\n    }\n}\n\nfunction genChildren(el){\n    let children = el.children // 获取children\n    if(children){\n    // _c(\"div\",{id:'app'},_c(\"div\",{id:'ccc'}),_v())\n    // _v： 代表创建一个文本\n        return children.map(child=>gen(child)).join(',')\n    }\n    return false\n}\n\n// el中的attrs ---> [{'name':'xxx','id':'app'},{'class':'a'}]\nfunction genProps(attrs){ \n    let str = ``;\n    for (let i = 0; i < attrs.length; i++) {\n        const attr = attrs[i];\n        if(attr.name ==='style'){\n            // color:red;background:pink\n            let styleObj = {}  // {color: 'red', background: 'pink'}\n            attr.value.replace(/([^;:]+)\\:([^;:]+)/g,function(){\n                styleObj[arguments[1]] = arguments[2]\n            })\n            attr.value = styleObj\n        }\n        str+= `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}` // str.slice(0,-1) 原因是要去掉最后一位的逗号\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\n// 构造AST语法树\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs,\n  };\n}\n\nlet root = null; //树根\nlet stack = [];\n// 开始标签\nfunction start(tagName, attributes) {\n//   console.log(tagName, attributes);\n  let parent = stack[stack.length - 1];\n  let element = createAstElement(tagName, attributes);\n  if (!root) {\n    root = element;\n  }\n  if(parent){\n    element.parent = parent; // 当放入栈中的时候记录父级元素\n    parent.children.push(element); // 存放子集元素\n  }\n  stack.push(element);\n}\n// 结束标签\nfunction end(endTagName) {\n  let last = stack.pop();\n  if (last.tag !== endTagName) {\n    // 标签闭合有误\n    throw new SyntaxError(\"标签闭合有误\");\n  }\n}\n// 文本标签\nfunction text(text) {\n  text = text.replace(/\\s/g, \"\");\n  let parent = stack[stack.length - 1];\n  if (parent) {\n    parent.children.push({\n      type: 3,\n      text,\n    });\n  }\n}\n\n// html = <div id=\"app\"></div>\nexport function parseHTML(html) {\n  // 前进方法\n  function advance(len) {\n    html = html.substring(len);\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      let end;\n      let attr;\n      // 1要有属性 2，不能为开始的结束标签 <div>\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n        advance(attr[0].length);\n      } // <div id=\"app\" a=1 b=2 >\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false;\n  }\n  // 看要解析的内容是否存在，如果存在就不停的解析\n  while (html) {\n    // 解析标签和文本\n    let index = html.indexOf(\"<\");\n    if (index == 0) {\n      // 解析开始标签 并且把属性也解析出来  </div>\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        // 开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch;\n      if ((endTagMatch = html.match(endTag))) {\n        // 结束标签\n        end(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n    }\n    // 文本截取:  {{name}}</div>\n    if (index > 0) {\n      let chars = html.substring(0, index);\n      text(chars);\n      advance(chars.length);\n    }\n  }\n  return root;\n}\n","// HTML解析成DOM树\nimport { generate } from \"./generate\";\nimport { parseHTML } from \"./parser\";\n// <div id=\"app\"> {{name}} </div>\nexport function compilerToFunction(template) {\n  let ast = parseHTML(template);\n\n  // 代码生成\n  const code = generate(ast);\n  // code中可能会用到数据，数据在vm上\n  const render = new Function(`with(this){\n    return ${code}\n  }`)\n  return render\n}\n","\n// 每个属性都分配一个Dep，Dep可以用来存放watcher, watcher存放这个dep\nlet id = 0;\nexport class Dep{ \n    constructor(){\n        this.id = id++\n        this.subs = [] // 用来存放watcher的\n    }\n    depend(){\n        // Dep.target dep里要存放这个watcher, 同样watcher要存放dep 多对多的关系\n        // Dep.target 是watcher\n        if(Dep.target){\n            // watcher 存 dep\n            Dep.target.addDep(this);\n        }\n    }\n    addSub(watcher){\n        this.subs.push(watcher)\n    }\n}\n\nDep.target = null;\nexport function pushTarget(wathcer){\n    Dep.target = wathcer;\n}\nexport function popTarget(){\n    Dep.target = null\n}","import { popTarget, pushTarget } from \"./dep\";\n\nlet id = 0; // 标识，当new Watcher的时候id自增\nclass Watcher{\n/**\n * \n * @param {*} vm 实例\n * @param {*} exprOrfn 表达式或者是一个函数\n * @param {*} cb 自定义的回调\n * @param {*} options 是一个标识，可能还是其它的选项\n */\n    constructor(vm,exprOrfn,cb,options){\n        this.vm = vm;\n        this.exprOrfn = exprOrfn;\n        this.cb = cb;\n        this.options = options;\n        // 默认让exprOrfn默认执行\n        // exprOrFn 调用了render方法，要去vm上取值\n        this.getter = exprOrfn\n        this.id = id++;\n\n        // 存放dep\n        this.deps = [];\n        this.depsId = new Set();\n\n        // 默认初始化要取值\n        this.get();\n    }\n    // 稍后用户更新的时候重新调用get方法\n    get(){ \n        // 取值：会调用Object.defineProperty, 每个属性都可以收集自己的Watcher\n        // 一个属性可以对应多个watcher, 同时一个watcher对应多个属性\n        // 为什么是多对多？ 一个属性可能在多个组件中使用(只要这个属性一变，这多个组件都要更新)，\n        // 一个组件可能有多个属性\n        pushTarget(this); // Dep.target = Watcher\n        this.getter(); // 执行这句话的时候会执行render, render会去vm实例上取值\n\n        // Dep.target = null; 如果在Dep.target中有值说明在模板中使用了\n        // 用户在外面取值的时候不去收集依赖\n        popTarget(); \n    }\n    addDep(dep){\n        let id = dep.id;\n        // 去重操作，防止一个页面上相同的属性使用了多次，从而收集多次watcher\n        if(!this.depsId.has(id)){\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n}\nexport default Watcher;","// 虚拟DOM比对\nexport function patch(oldVnode, vnode) {\n  if (oldVnode.nodeType == 1) {\n    \n    const parentElm = oldVnode.parentNode; \n\n    const element = createElm(vnode); \n    parentElm.insertBefore(element, oldVnode.nextSibling);\n\n    parentElm.removeChild(oldVnode);\n\n    // 这里必须返回用虚拟DOM创建的真实DOM，然后挂载的vm.$el上\n    // parentElm.removeChild(oldVnode); vm.$el中的元素被删除掉了\n    return element;\n  }\n}\nfunction createElm(vnode) {\n  const { tag, data, children, text, vm } = vnode;\n  // tag === 'string' 证明是一个元素\n  // 每个虚拟节点的身上都有el 属性，对应真实节点\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    // 子节点创建\n    // 树的深度遍历，插入子元素\n    children.forEach(child=>{\n        vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    // 文本\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el\n}\n","import Watcher from \"./observer/watcher\";\nimport { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue){\n    Vue.prototype._update = function(vnode){\n        // 既有初始化， 又有更新\n        // patch： diff流程\n        // vnode 利用虚拟节点创建真实节点，替换 $el 中的内容\n        const vm = this;\n        vm.$el = patch(vm.$el, vnode)\n        // console.log(vm,vnode)\n    }\n}\n\n// 后续每个组件渲染的时候都会有一个watcher\nexport function mountComponent(vm, el) {\n    // 更新函数，数据变化后还会再次调用此函数\n    let updateComponent = ()=>{\n        // 调用render函数生成虚拟DOM\n        // 调用_update将虚拟DOM变成真实DOM\n        // 后续更新可以调用updateComponet方法\n        vm._update(vm._render());\n    }\n    // 什么是挂载？\n    // 根据render方法生成DOM元素，将id=app里面的内容替换掉，这就叫挂载 \n\n    // 默认会调用一次\n    // 组件挂载的时候会执行此方法\n    // 属性是被观察者，属性变了通知视图更新\n    // 观察者：刷新页面\n    new Watcher(vm,updateComponent,()=>{\n        console.log(\"更新视图了\")\n    },true) // true这个标识是代表它是一个渲染watcher, 后续有其它的Watcher\n}\n","export function isFunction(val) {\n  return typeof val === \"function\";\n}\n\nexport function isObject(val){\n    return typeof val === 'object' && val !== null\n}","// Objec.create 模拟\n// function ObjectCreate(proto){\n//     function F(){}\n//     F.prototype = proto\n//     return new F();\n// }\nlet oldArrayPrototype = Array.prototype;\nexport let arrayMethods = Object.create(Array.prototype);\n// arrayMethods.__proto__ = Array.prototype // 就是个继承\n\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\nmethods.forEach((method) => {\n  // 用户调用的是以上的7个方法，会用我自己重写的，否则会用原来的\n  arrayMethods[method] = function (...args) {\n    // 相当于调用原来的push, this --> 谁调用就指向谁\n    oldArrayPrototype[method].call(this, ...args);\n\n    // args就是新增的内容\n    // push splice unshift\n    let inserted;\n    let ob = this.__ob__ // 这里获取的就是Observer实例\n    switch (method) {\n      case \"push\":\n        inserted = args\n        break;\n      case \"splice\":\n        inserted = args.slice(2)\n        break;\n      case \"unshift\":\n        inserted = args\n        break;\n    }\n    // 如果有新增的内容，继续进行劫持\n    // 需要观测数组中的每一项，而不是数组，\n    // this是那个数组，index.js文件中的也是那个数组\n    if(inserted){\n        ob.observeArray(inserted)\n    }\n  };\n});\n","import { isObject } from \"../utils\";\nimport { arrayMethods } from \"./array\";\nimport { Dep } from \"./dep\";\n\nclass Observer {\n  constructor(data) {\n    // this指向Observer实例\n    // data.__ob__ 等于当前的Observer实例\n    // 所有被劫持的属性都有__ob__\n    // data.__ob__ 在这里会被不停的观测\n    // 将data.__ob__ 变成不可枚举的属性\n    data.__ob__ = this;\n    Object.defineProperty(data,'__ob__',{\n        value: this,\n        enumerable: false\n    })\n\n    if (Array.isArray(data)) {\n      // 数组劫持的逻辑，对数组原来的方法进行改写，切片编程\n      // console.log(arrayMethods) // Object.create(Array.prototype)\n      // 如果数组中的数据是对象类型，需要监控对象的变化\n      data.__proto__ = arrayMethods;\n      // 数组中的对象进行劫持\n      this.observeArray(data);\n    } else {\n      // 对象劫持的逻辑\n      this.walk(data);\n    }\n  }\n  // 数组观测\n  observeArray(data) {\n    // 对数组中数组 或者是 数组中的对象再次劫持，递归\n    data.forEach((item) => {\n      observe(item);\n    });\n  }\n  // walk --> 走，步行\n  walk(data) {\n    // Object.keys不会遍历到原型链，取到的都是私有属性\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  observe(value);\n  let dep = new Dep(); // 每个属性都会有自己的dep\n  Object.defineProperty(data, key, {\n    get() {\n      // watcher和 Dep 对应\n      // Dep.target 如果有值说明用户在模板中取值了\n      if(Dep.target){\n        // 让dep记住watcher\n        dep.depend()\n      }\n      return value;\n    },\n    set(newValue) {\n      // 设置的新值有可能还是对象\n      observe(value);\n      value = newValue;\n    },\n  });\n}\n\nexport function observe(data) {\n  if (!isObject(data)) {\n    return;\n  }\n  // data.__ob__ 代表已经被观测过了\n  if (data.__ob__) {\n    return;\n  }\n  // 创建一个观测者\n  return new Observer(data);\n}\n","import { observe } from \"./observer/index\";\nimport { isFunction } from \"./utils\";\n\nexport function initState(vm) {\n  // 状态的初始化\n  const options = vm.$options;\n  // props在data之前\n  if (options.props) {\n  }\n\n  if (options.methods) {\n  }\n\n  if (options.data) {\n    initData(vm);\n  }\n  if (options.computed) {\n  }\n\n  if (options.watch) {\n  }\n}\n\n/**\n * \n * @param {*} vm vue实例\n * @param {*} target 去哪里取值\n * @param {*} key key值\n */\nfunction proxy(vm,target,key){\n  // vm上定义key, vm.xxx的时候帮我们从vm._data.xxx中获取\n  Object.defineProperty(vm,key,{\n    get(){\n      return vm[target][key]\n    },\n    set(newVal){\n      vm[target][key] = newVal\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = isFunction(data) ? data.call(this) : data;\n  // 代理取值\n  for (const key in data) {\n    proxy(vm,'_data',key)\n  }\n  // 数据观测\n  observe(data);\n}\n","import { compilerToFunction } from \"./compiler/index\";\nimport { mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\n\n// 表示在vue的基础上做一次混合的操作\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // el 和 data\n    const vm = this;\n    vm.$options = options; // 后续对options进行扩展\n\n    // 对数据进行初始化 watch,props,computed,data ...\n    initState(vm); // vm.$options.data  vm.$options.computed ...\n\n    // 看用户的实例上有没有el这样的属性\n    // 有el属性就调用 vm.$mount\n    // 没有 el 属性就是 new Vue().$mount('el')\n    if (vm.$options.el) {\n      // 将数据挂载到这个模板上\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    el = document.querySelector(el);\n    vm.$el = el;\n    const options = vm.$options;\n    /**\n     * 把模板转换转换成对应的渲染函数，还可以引入虚拟DOM的概念，\n     * 通过渲染函数产生虚拟节点，用户更新数据了，更新虚拟DOM，\n     * 最后再产生真实节点去更新视图\n     */\n    if (!vm.$options.render) {\n      // 没有render就使用template\n      let template = options.template;\n      if (!template && el) {\n        // 用户没有传递template就取el的内容作为模板\n        template = el.outerHTML;\n        const render = compilerToFunction(template)\n        // options.render就是渲染函数\n        // 谁调用render render中的 with(this) 就指向谁\n        options.render = render\n      }\n    }\n    // options.render就是渲染函数\n    // 调用render方法，最终渲染成真实DOM，替换掉页面的内容\n    \n    // 组件的挂载流程\n    // 将组件实例，挂载到el元素上\n    mountComponent(vm, el);\n  };\n}\n","export function createElement(vm, tag, data = {}, ...children) {\n  return vnode(tag, data, data.key, children, undefined, vm);\n}\n\nexport function createTextElement(vm, text) {\n  return vnode(undefined, undefined, undefined, undefined, text, vm);\n}\n\n// 创建虚拟DOM\nfunction vnode(tag, data, key, children, text, vm) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    vm,\n    // ...\n  };\n}\n","import { createElement, createTextElement } from \"./vdom/index\"\n\nexport function renderMixin(Vue){\n    // 元素，数据，孩子\n    // createElement\n    Vue.prototype._c = function(tagName,data,...children){\n        const vm = this \n        return createElement(vm,...arguments)\n    }\n    // 文本\n    // createTextElement\n    Vue.prototype._v = function(text){\n        const vm = this \n        return createTextElement(vm,text)\n    }\n    // 变量\n    Vue.prototype._s = function(val){   \n        return typeof val === 'object'? JSON.stringify(val):val\n    }\n\n    Vue.prototype._render = function(){\n        \n        const vm = this;\n\n        // 这里的render就是挂载到用户选项上的render，同时也有可能是用户写的\n        const render = vm.$options.render\n        // 调用render生成虚拟DOM\n        const vnode = render.call(vm)\n        return vnode;\n    }\n}","import { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./render\";\n\nfunction Vue(options){\n    // options为用户传入的选项\n    this._init(options); // 初始化操作\n}\ninitMixin(Vue);\nrenderMixin(Vue); // _render\nlifecycleMixin(Vue); // _update\nexport default Vue;"],"names":["defaultTagRE","generate","el","children","genChildren","code","tag","attrs","length","genProps","gen","type","text","test","tokens","match","lastIndex","exec","index","push","JSON","stringify","slice","trim","join","map","child","str","i","attr","name","styleObj","value","replace","arguments","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","createAstElement","tagName","parent","root","stack","start","attributes","element","end","endTagName","last","pop","SyntaxError","parseHTML","html","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","chars","compilerToFunction","template","ast","render","Function","id","Dep","subs","target","addDep","watcher","pushTarget","wathcer","popTarget","Watcher","vm","exprOrfn","cb","options","getter","deps","depsId","Set","get","dep","has","add","addSub","patch","oldVnode","vnode","nodeType","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","data","document","createElement","forEach","appendChild","createTextNode","lifecycleMixin","Vue","prototype","_update","$el","mountComponent","updateComponent","_render","console","log","isFunction","val","isObject","oldArrayPrototype","Array","arrayMethods","Object","create","methods","method","args","call","inserted","ob","__ob__","observeArray","Observer","defineProperty","enumerable","isArray","__proto__","walk","item","observe","keys","key","defineReactive","depend","set","newValue","initState","$options","props","initData","computed","watch","proxy","newVal","_data","initMixin","_init","$mount","querySelector","outerHTML","undefined","createTextElement","renderMixin","_c","_v","_s"],"mappings":"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"}