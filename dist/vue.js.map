{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/observer/dep.js","../src/utils.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\n// _c(\"div\",{id:'app'},'你好')\nexport function generate(el){\n    // 遍历树，将树拼接成字符串\n    let children = genChildren(el);\n    let code = `_c('${el.tag}',\n        ${ el.attrs.length ? genProps(el.attrs) : 'undefined' }\n        ${children?`,${children}`:''})`\n    return code\n}\n\n// 生成子元素\nfunction gen(el){\n    if(el.type == 1){\n        return generate(el)\n    }else {\n        let text = el.text\n        if(!defaultTagRE.test(text)){\n            return `_v('${text}')`;\n        }else{\n            // hello {{arr}} world  转换成  'hello'+ arr+ 'world'\n            let tokens = [];\n            let match;\n            let lastIndex = defaultTagRE.lastIndex = 0;\n\n            // 看有没有匹配到\n            while (match = defaultTagRE.exec(text)) {\n                let index = match.index; // 开始索引\n                if(index > lastIndex){\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n                }\n                // _c,_v,_s \n                // _c：创建一个元素\n                // _v：里面包含的是一个文本\n                // _s：里面是一个变量，使用JSON.string转换一下\n                // JSON.stringfy 目的，这里的{{arr}} arr变量可能是对象，\n                // 需要进行JSON.stringfy,不然转隐式化过来就是[object Object]\n                tokens.push(`_s(${match[1].trim()})`) \n                lastIndex = index + match[0].length\n            }\n            if(lastIndex < text.length){\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\n            }\n            return `_v(${tokens.join('+')})`\n        }\n\n    }\n}\n\nfunction genChildren(el){\n    let children = el.children // 获取children\n    if(children){\n    // _c(\"div\",{id:'app'},_c(\"div\",{id:'ccc'}),_v())\n    // _v： 代表创建一个文本\n        return children.map(child=>gen(child)).join(',')\n    }\n    return false\n}\n\n// el中的attrs ---> [{'name':'xxx','id':'app'},{'class':'a'}]\nfunction genProps(attrs){ \n    let str = ``;\n    for (let i = 0; i < attrs.length; i++) {\n        const attr = attrs[i];\n        if(attr.name ==='style'){\n            // color:red;background:pink\n            let styleObj = {}  // {color: 'red', background: 'pink'}\n            attr.value.replace(/([^;:]+)\\:([^;:]+)/g,function(){\n                styleObj[arguments[1]] = arguments[2]\n            })\n            attr.value = styleObj\n        }\n        str+= `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}` // str.slice(0,-1) 原因是要去掉最后一位的逗号\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\n// 构造AST语法树\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs,\n  };\n}\n\nlet root = null; //树根\nlet stack = [];\n// 开始标签\nfunction start(tagName, attributes) {\n  let parent = stack[stack.length - 1];\n  let element = createAstElement(tagName, attributes);\n  if (!root) {\n    root = element;\n  }\n  if(parent){\n    element.parent = parent; // 当放入栈中的时候记录父级元素\n    parent.children.push(element); // 存放子集元素\n  }\n  stack.push(element);\n}\n// 结束标签\nfunction end(endTagName) {\n  let last = stack.pop();\n  if (last.tag !== endTagName) {\n    // 标签闭合有误\n    throw new SyntaxError(\"标签闭合有误\");\n  }\n}\n// 文本标签\nfunction text(text) {\n  text = text.replace(/\\s/g, \"\");\n  let parent = stack[stack.length - 1];\n  if (parent) {\n    parent.children.push({\n      type: 3,\n      text,\n    });\n  }\n}\n\n// html = <div id=\"app\"></div>\nexport function parseHTML(html) {\n  // 前进方法\n  function advance(len) {\n    html = html.substring(len);\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      let end;\n      let attr;\n      // 1要有属性 2，不能为开始的结束标签 <div>\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n        advance(attr[0].length);\n      } // <div id=\"app\" a=1 b=2 >\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false;\n  }\n  // 看要解析的内容是否存在，如果存在就不停的解析\n  while (html) {\n    // 解析标签和文本\n    let index = html.indexOf(\"<\");\n    if (index == 0) {\n      // 解析开始标签 并且把属性也解析出来  </div>\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        // 开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch;\n      if ((endTagMatch = html.match(endTag))) {\n        // 结束标签\n        end(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n    }\n    // 文本截取:  {{name}}</div>\n    if (index > 0) {\n      let chars = html.substring(0, index);\n      text(chars);\n      advance(chars.length);\n    }\n  }\n  return root;\n}\n","// HTML解析成DOM树\nimport { generate } from \"./generate\";\nimport { parseHTML } from \"./parser\";\n// <div id=\"app\"> {{name}} </div>\nexport function compilerToFunction(template) {\n  let ast = parseHTML(template);\n\n  // 代码生成\n  const code = generate(ast);\n  // code中可能会用到数据，数据在vm上\n  const render = new Function(`with(this){\n    return ${code}\n  }`)\n  return render\n}\n","\n// 每个属性都分配一个Dep，Dep可以用来存放watcher, watcher存放这个dep\nlet id = 0;\nexport class Dep{ \n    constructor(){\n        this.id = id++\n        this.subs = [] // 用来存放watcher的\n    }\n    depend(){\n        // Dep.target dep里要存放这个watcher, 同样watcher要存放dep 多对多的关系\n        // Dep.target 是watcher\n        if(Dep.target){\n            // watcher 存 dep\n            Dep.target.addDep(this);\n        }\n    }\n    addSub(watcher){\n        this.subs.push(watcher)\n    }\n    notify(){\n        this.subs.forEach(watcher=>{\n            watcher.update(); // 执行get\n        })\n    }\n}\n\nDep.target = null;\nexport function pushTarget(wathcer){\n    Dep.target = wathcer;\n}\nexport function popTarget(){\n    Dep.target = null\n}","export function isFunction(val) {\n  return typeof val === \"function\";\n}\n\nexport function isObject(val) {\n  return typeof val === \"object\" && val !== null;\n}\n\nconst callbacks = [];\nfunction flushCallback() {\n  callbacks.forEach((cb) => cb());\n  waiting = false;\n}\n\nlet waiting = false;\n\nfunction timer(flushCallback) {\n  let timerFn = () => {};\n  if (Promise) {\n    timerFn = () => {\n      Promise.resolve().then(flushCallback);\n    };\n  } else if (MutationObserver) {\n    let textNode = document.createTextNode(1);\n    let observe = new MutationObserver(flushCallback);\n    // 监听内容的变化\n    observe.observe(textNode, {\n      characterData: true,\n    });\n    timerFn = () => {\n      textNode.textContent = 3;\n    };\n  } else if (setImmediate) {\n    timerFn = () => {\n      setImmediate(flushCallback);\n    };\n  } else {\n    timerFn = () => {\n      setTimeout(flushCallback);\n    };\n  }\n  timerFn();\n}\n\nexport function nextTick(cb) {\n  callbacks.push(cb);\n  if (!waiting) {\n    // vue2考虑了兼容性问题，vue3里面不再考虑兼容性问题\n    timer(flushCallback);\n    waiting = true;\n  }\n}\n","import { nextTick } from \"../utils\";\n\nlet queue = [];\nlet has = {}; // 做列表的。列表的维护存放了哪些watcher\n\nfunction flushSchedulerQeue() {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i].run();\n  }\n  // 清空队列,数据更新后保证只更新一次视图\n  queue = [];\n  has = {};\n  pending = false;\n}\n\nlet pending = false;\n// 等待同步代码执行完毕以后，才执行异步逻辑\n// 当前执行栈中代码执行完毕后，会先清空微任务，再清空宏任务\n// 尽早更新页面，$nextTicket\nexport function queueWatcher(watcher) {\n  // 这里watcher进行一次去重，这里每个属性都有一个dep,\n  // dep里又有watcher，所以多次更新操作的时候watcher可能是同一个，要进行去重\n  const id = watcher.id;\n  if (!has[id]) {\n    queue.push(watcher);\n    has[id] = true;\n    // 开启一次更新操作，多次触发queueWatcher 只触发一次nextTick(flushSchedulerQeue)\n    // 如果是同步：可能进来不同的watcher，那么可不止一次调用 nextTick(flushSchedulerQeue)\n    if (!pending) { \n      nextTick(flushSchedulerQeue);\n      pending = true;\n    }\n  }\n}\n","import { popTarget, pushTarget } from \"./dep\";\nimport { queueWatcher } from \"./scheduler\";\n\nlet id = 0; // 标识，当new Watcher的时候id自增\nclass Watcher{\n/**\n * \n * @param {*} vm 实例\n * @param {*} exprOrfn 表达式或者是一个函数\n * @param {*} cb 自定义的回调\n * @param {*} options 是一个标识，可能还是其它的选项\n */\n    constructor(vm,exprOrfn,cb,options){\n        this.vm = vm;\n        this.exprOrfn = exprOrfn;\n        // 看是不是用户watcher\n        this.user = !!options.user\n        this.cb = cb;\n        this.options = options;\n        // 判断是不是一个函数？有可能是一个key值\n        if(typeof exprOrfn === 'string'){\n            // 需要将key值转换成函数\n            this.getter = function(){\n                // 当数据取值的时候会进行依赖收集\n                // 会走对应的getter---> 走了getter就会进行依赖收集\n                // 用户有可能使用 'age.n'---> 这种方式定义watch中的处理函数--->需要变成this.vm['age']['n']\n                const path = exprOrfn.split('.')\n                let obj = vm;\n                for (let i = 0; i < path.length; i++) {\n                    obj = obj[path[i]];\n                }\n                return obj; \n            }\n        }else{\n            // 默认让exprOrfn默认执行\n            // exprOrFn 调用了render方法，要去vm上取值\n            this.getter = exprOrfn\n        }\n\n        this.id = id++;\n\n        // 存放dep\n        this.deps = [];\n        this.depsId = new Set();\n\n        // 默认初始化要取值\n        // 第一次的value\n        this.value = this.get();\n    }\n    // 稍后用户更新的时候重新调用get方法\n    get(){ \n        // 取值：会调用Object.defineProperty, 每个属性都可以收集自己的Watcher\n        // 一个属性可以对应多个watcher, 同时一个watcher对应多个属性\n        // 为什么是多对多？ 一个属性可能在多个组件中使用(只要这个属性一变，这多个组件都要更新)，\n        // 一个组件可能有多个属性\n        // Dep.target = Watcher\n        pushTarget(this); \n\n        // 执行这句话的时候会执行render, render会去vm实例上取值\n        //用户watcher: 第一次执行的时候会返回value, 等到set的时候又会走get返回新的值\n        const value = this.getter();\n        // Dep.target = null; 如果在Dep.target中有值说明在模板中使用了\n        // 用户在外面取值的时候不去收集依赖\n        popTarget(); \n        return value\n    }\n    update() {\n        // this是 watcher\n        // 每次调用update 将watcher缓存起来，之后一起更新\n        // vue中的更新操作是异步的\n        queueWatcher(this);\n    }\n    // run 就是执行了updateComponent方法\n    run(){\n        // 新值\n        let newVal = this.get();\n        // 老值\n        let oldVal = this.value \n        this.value = newVal // 为了保证下一次更新的时候，上一次的最新值是下一次的老值\n        if(this.user){\n            // 是用户watcher才会调用watch中的函数\n            this.cb.call(this.vm, newVal,oldVal)\n        }\n    }\n    addDep(dep){\n        let id = dep.id;\n        // 去重操作，防止一个页面上相同的属性使用了多次，从而收集多次watcher\n        if(!this.depsId.has(id)){\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n}\nexport default Watcher;","// 虚拟DOM比对\nexport function patch(oldVnode, vnode) {\n  if (oldVnode.nodeType == 1) {\n    \n    const parentElm = oldVnode.parentNode; \n\n    const element = createElm(vnode); \n    parentElm.insertBefore(element, oldVnode.nextSibling);\n\n    parentElm.removeChild(oldVnode);\n\n    // 这里必须返回用虚拟DOM创建的真实DOM，然后挂载的vm.$el上\n    // parentElm.removeChild(oldVnode); vm.$el中的元素被删除掉了\n    return element;\n  }\n}\nfunction createElm(vnode) {\n  const { tag, data, children, text, vm } = vnode;\n  // tag === 'string' 证明是一个元素\n  // 每个虚拟节点的身上都有el 属性，对应真实节点\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    // 子节点创建\n    // 树的深度遍历，插入子元素\n    children.forEach(child=>{\n        vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    // 文本\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el\n}\n","import Watcher from \"./observer/watcher\";\nimport { nextTick } from \"./utils\";\nimport { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue){\n    Vue.prototype._update = function(vnode){\n        // 既有初始化， 又有更新\n        // patch： diff流程\n        // vnode 利用虚拟节点创建真实节点，替换 $el 中的内容\n        const vm = this;\n        vm.$el = patch(vm.$el, vnode)\n    }\n    // nextTick\n    Vue.prototype.$nextTick = nextTick\n}\n\n// 后续每个组件渲染的时候都会有一个watcher\nexport function mountComponent(vm, el) {\n    // 更新函数，数据变化后还会再次调用此函数\n    let updateComponent = ()=>{\n        // 调用render函数生成虚拟DOM\n        // 调用_update将虚拟DOM变成真实DOM\n        // 后续更新可以调用updateComponet方法\n        vm._update(vm._render());\n    }\n    // 什么是挂载？\n    // 根据render方法生成DOM元素，将id=app里面的内容替换掉，这就叫挂载 \n\n    // 默认会调用一次\n    // 组件挂载的时候会执行此方法\n    // 属性是被观察者，属性变了通知视图更新\n    // 观察者：刷新页面\n    new Watcher(vm,updateComponent,()=>{\n        console.log(\"更新视图了\")\n    },true) // true这个标识是代表它是一个渲染watcher, 后续有其它的Watcher\n}\n","let oldArrayPrototype = Array.prototype;\nexport let arrayMethods = Object.create(Array.prototype);\n\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    oldArrayPrototype[method].call(this, ...args);\n    let inserted;\n    let ob = this.__ob__;\n    switch (method) {\n      case \"push\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n        break;\n      case \"unshift\":\n        inserted = args;\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n    // ob.dep 就是observer实例 \n    ob.dep.notify()\n  };\n});\n","import { isObject } from \"../utils\";\nimport { arrayMethods } from \"./array\";\nimport { Dep } from \"./dep\";\n\n// 如果给对象新增一个属性不会触发视图更新(给对象本身增加一个dep,dep中存watcher, \n// 如果增加一个属性后，就手动触发watcher更新)\nclass Observer {\n  constructor(data) {\n    data.__ob__ = this;\n\n    // 给Observer实例添加dep属性\n    this.dep = new Dep(); // 数据可能是数组可能是对象\n\n    Object.defineProperty(data,'__ob__',{\n        value: this,\n        enumerable: false\n    })\n\n    if (Array.isArray(data)) {\n        // 数组的变化触发视图更新？\n      data.__proto__ = arrayMethods;\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n  observeArray(data) {\n    // 如果数组里面是对象类型，也做了观测， JSON.stringfy() 也做了收集依赖\n    data.forEach((item) => {\n      observe(item);\n    });\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\n// 数组套数组，进行依赖收集\nfunction dependArray(value){\n  for (let i = 0; i < value.length; i++) {\n    let currentArray = value[i]; \n    currentArray.__ob__ && currentArray.__ob__.dep.depend();\n    // 多维数组\n    if(Array.isArray(currentArray)){\n      dependArray(currentArray)\n    }\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  // childOb 获取的就是Observer实例，Observer实例身上有dep实例，dep在getter的时候收集依赖\n  let childOb = observe(value);\n\n  let dep = new Dep(); \n  Object.defineProperty(data, key, {\n    get() {\n      if(Dep.target){\n        dep.depend()\n        // childOb可能是数组可能是对象，对象也要收集依赖，后续写$set方法的时候需要触发它自己的更新操作\n        if(childOb){ \n          // childOb存的是Observer实例，Observer身上有dep属性, 数组和对象都记录watcher\n          // dep.depend收集watcher, 当数组更新的时候, dep.notify()通知watcher更新视图\n          // 这里只是收集依赖只是收集了最外层的数组\n          childOb.dep.depend()\n          // 数组套数组的情况, 多维数组的情况也要进行依赖收集\n          if(Array.isArray(value)){\n            dependArray(value)\n          }\n        }\n      }\n      return value;\n    },\n    set(newValue) {\n      // 设置的新值有可能还是对象\n      if(newValue !== value){\n        observe(value);\n        value = newValue;\n        dep.notify(); // 告诉当前的属性存放的watcher执行\n      }\n    },\n  });\n}\n\nexport function observe(data) {\n  if (!isObject(data)) {\n    return;\n  }\n  // data.__ob__ 代表已经被观测过了\n  if (data.__ob__) {\n    return data.__ob__;\n  }\n  // 创建一个观测者\n  return new Observer(data);\n}\n","import { observe } from \"./observer/index\";\nimport Watcher from \"./observer/watcher\";\nimport { isFunction } from \"./utils\";\n\nexport function stateMxin(Vue){\n  Vue.prototype.$watch = function(key,handler,options={}){\n    options.user = true; // 用户自己写的watcher, 要和渲染watcher区分开\n    // vm,exprOrfn,cb,options\n    const vm = this;\n    // vm, name, 用户回调, options.user\n    let watcher = new Watcher(vm,key,handler,options)\n    // 看是不是立即执行，是则直接调用handler 返回watcher中的value,\n    // 第一次执行只有新值\n    if(options.immediate){\n      handler(watcher.value) \n    }\n  }\n}\n\nexport function initState(vm) {\n  // 状态的初始化\n  const options = vm.$options;\n  // props在data之前\n  if (options.props) {\n  }\n\n  if (options.methods) {\n  }\n\n  if (options.data) {\n    initData(vm);\n  }\n  if (options.computed) {\n  }\n\n  if (options.watch) {\n    // 用户有watch的时候初始化watch\n    initWatch(vm, options.watch);\n  }\n}\n\n/**\n *\n * @param {*} vm vue实例\n * @param {*} target 去哪里取值\n * @param {*} key key值\n */\nfunction proxy(vm, target, key) {\n  // vm上定义key, vm.xxx的时候帮我们从vm._data.xxx中获取\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newVal) {\n      vm[target][key] = newVal;\n    },\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = isFunction(data) ? data.call(this) : data;\n  // 代理取值\n  for (const key in data) {\n    proxy(vm, \"_data\", key);\n  }\n  // 数据观测\n  observe(data);\n}\n\n// 初始化watch\nfunction initWatch(vm, watch) {\n  for (const key in watch) {\n    const handler = watch[key];\n    if (Array.isArray(handler)) {\n      // 看是不是数组\n      for (let i = 0; i < handler.length; i++) {\n        // handler[i] // 每一个handler函数\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      // handler  // hander函数\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher(vm,key,handler) {\n  return vm.$watch(key,handler)\n}\n","import { compilerToFunction } from \"./compiler/index\";\nimport { mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\n\n// 表示在vue的基础上做一次混合的操作\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // el 和 data\n    const vm = this;\n    vm.$options = options; // 后续对options进行扩展\n\n    // 对数据进行初始化 watch,props,computed,data ...\n    initState(vm); // vm.$options.data  vm.$options.computed ...\n\n    // 看用户的实例上有没有el这样的属性\n    // 有el属性就调用 vm.$mount\n    // 没有 el 属性就是 new Vue().$mount('el')\n    if (vm.$options.el) {\n      // 将数据挂载到这个模板上\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    el = document.querySelector(el);\n    vm.$el = el;\n    const options = vm.$options;\n    /**\n     * 把模板转换转换成对应的渲染函数，还可以引入虚拟DOM的概念，\n     * 通过渲染函数产生虚拟节点，用户更新数据了，更新虚拟DOM，\n     * 最后再产生真实节点去更新视图\n     */\n    if (!vm.$options.render) {\n      // 没有render就使用template\n      let template = options.template;\n      if (!template && el) {\n        // 用户没有传递template就取el的内容作为模板\n        template = el.outerHTML;\n        const render = compilerToFunction(template)\n        // options.render就是渲染函数\n        // 谁调用render render中的 with(this) 就指向谁\n        options.render = render\n      }\n    }\n    // options.render就是渲染函数\n    // 调用render方法，最终渲染成真实DOM，替换掉页面的内容\n    \n    // 组件的挂载流程\n    // 将组件实例，挂载到el元素上\n    mountComponent(vm, el);\n  };\n}\n","export function createElement(vm, tag, data = {}, ...children) {\n  return vnode(tag, data, data.key, children, undefined, vm);\n}\n\nexport function createTextElement(vm, text) {\n  return vnode(undefined, undefined, undefined, undefined, text, vm);\n}\n\n// 创建虚拟DOM\nfunction vnode(tag, data, key, children, text, vm) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    vm,\n    // ...\n  };\n}\n","import { createElement, createTextElement } from \"./vdom/index\"\n\nexport function renderMixin(Vue){\n    // 元素，数据，孩子\n    // createElement\n    Vue.prototype._c = function(tagName,data,...children){\n        const vm = this \n        return createElement(vm,...arguments)\n    }\n    // 文本\n    // createTextElement\n    Vue.prototype._v = function(text){\n        const vm = this \n        return createTextElement(vm,text)\n    }\n    // 变量\n    Vue.prototype._s = function(val){   \n        return typeof val === 'object'? JSON.stringify(val):val\n    }\n\n    Vue.prototype._render = function(){\n        \n        const vm = this;\n\n        // 这里的render就是挂载到用户选项上的render，同时也有可能是用户写的\n        const render = vm.$options.render\n        // 调用render生成虚拟DOM\n        const vnode = render.call(vm)\n        return vnode;\n    }\n}","import { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./render\";\nimport { stateMxin } from \"./state\";\n\nfunction Vue(options){\n    // options为用户传入的选项\n    this._init(options); // 初始化操作\n}\ninitMixin(Vue);\nrenderMixin(Vue); // _render\nlifecycleMixin(Vue); // _update\n\nstateMxin(Vue); // 状态混入\nexport default Vue;"],"names":["defaultTagRE","generate","el","children","genChildren","code","tag","attrs","length","genProps","gen","type","text","test","tokens","match","lastIndex","exec","index","push","JSON","stringify","slice","trim","join","map","child","str","i","attr","name","styleObj","value","replace","arguments","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","createAstElement","tagName","parent","root","stack","start","attributes","element","end","endTagName","last","pop","SyntaxError","parseHTML","html","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","chars","compilerToFunction","template","ast","render","Function","id","Dep","subs","target","addDep","watcher","forEach","update","pushTarget","wathcer","popTarget","isFunction","val","isObject","callbacks","flushCallback","cb","waiting","timer","timerFn","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","queue","has","flushSchedulerQeue","run","pending","queueWatcher","Watcher","vm","exprOrfn","options","user","getter","path","split","obj","deps","depsId","Set","get","newVal","oldVal","call","dep","add","addSub","patch","oldVnode","vnode","nodeType","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","data","createElement","appendChild","lifecycleMixin","Vue","prototype","_update","$el","$nextTick","mountComponent","updateComponent","_render","console","log","oldArrayPrototype","Array","arrayMethods","Object","create","methods","method","args","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","isArray","__proto__","walk","item","keys","key","defineReactive","dependArray","currentArray","depend","childOb","set","newValue","stateMxin","$watch","handler","immediate","initState","$options","props","initData","computed","watch","initWatch","proxy","_data","createWatcher","initMixin","_init","$mount","querySelector","outerHTML","undefined","createTextElement","renderMixin","_c","_v","_s"],"mappings":"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"}