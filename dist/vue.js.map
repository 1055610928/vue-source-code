{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/global-api/index.js","../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/observer/dep.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function isFunction(val) {\n  return typeof val === \"function\";\n}\n\nexport function isObject(val) {\n  return typeof val === \"object\" && val !== null;\n}\n\nconst callbacks = [];\nfunction flushCallback() {\n  callbacks.forEach((cb) => cb());\n  waiting = false;\n}\n\nlet waiting = false;\n\nfunction timer(flushCallback) {\n  let timerFn = () => {};\n  if (Promise) {\n    timerFn = () => {\n      Promise.resolve().then(flushCallback);\n    };\n  } else if (MutationObserver) {\n    let textNode = document.createTextNode(1);\n    let observe = new MutationObserver(flushCallback);\n    // 监听内容的变化\n    observe.observe(textNode, {\n      characterData: true,\n    });\n    timerFn = () => {\n      textNode.textContent = 3;\n    };\n  } else if (setImmediate) {\n    timerFn = () => {\n      setImmediate(flushCallback);\n    };\n  } else {\n    timerFn = () => {\n      setTimeout(flushCallback);\n    };\n  }\n  timerFn();\n}\n\nexport function nextTick(cb) {\n  callbacks.push(cb);\n  if (!waiting) {\n    // vue2考虑了兼容性问题，vue3里面不再考虑兼容性问题\n    timer(flushCallback);\n    waiting = true;\n  }\n}\n\n\n\nlet lifecycleHooks = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\nlet strats = {}; // 存放各种策略\nlifecycleHooks.forEach(hook=>{\n  strats[hook] = mergeHook\n})\nstrats.components = function(parentVal,childVal){\n  // Vue.options.components\n  // 先在自己上找，找不到去找原型上的\n  // console.log(parentVal,childVal)\n  // 根据父对象构造一个新对象，options.__proto__\n  // 将子类放到options的实例上，父类存在原型链上\n  const options = Object.create(parentVal);\n  if(childVal){\n    for (const key in childVal) {\n      options[key] = childVal[key]\n    }\n  }\n  \n  return options;\n}\n\nfunction mergeHook(parentVal,childVal){\n  if(childVal){\n    if(parentVal){ // 父亲有和儿子有，进行拼接\n      return parentVal.concat(childVal);\n    }else{\n      return [childVal] //第一次执行，如果只是子有直接返回数组包含的生命周期钩子\n    }\n  }else{\n    return parentVal\n  }\n}\n\n// 合并选项\n// this.options是空对象， 传进来的options={beforeCreated:Fn} =>{beforeCreated:[fn]}\n// 下一次调用Vue.mixin = {beforeCreated:[fn,fn1]} ---> 合并到数组里\n// parentOptions -> Vue.options   childOptions -> userOptions\nexport function mergeOptions(parentOptions, childOptions) {\n  // 两个对象合并\n  const options = {}; // 合并后的结果\n\n  // this.options有\n  for (const key in parentOptions) {\n    mergeFild(key);\n  }\n  \n  // mixin的选项遍历\n  for (const key in childOptions) {\n    // 如果这个key在父options中有这个属性，就不用合并了\n    if(parentOptions.hasOwnProperty(key)){\n      continue;\n    }\n    mergeFild(key);\n  }\n\n  function mergeFild(key) {\n    const parentVal = parentOptions[key];\n    const childVal = childOptions[key];\n    // 策略模式, 根据不同的策略做不同的事情\n    // 如果有策略调用对应的策略即可\n    if(strats[key]){\n      options[key] = strats[key](parentVal,childVal)\n    }else{\n      // 看parentOptions和childOptions是不是对象\n      if (isObject(parentVal) && isObject(childVal)) {\n        options[key] = { ...parentVal, ...childVal };\n      }else{\n        // 父亲有，儿子没有\n        options[key] = childOptions[key] || parentOptions[key]\n      }\n    }\n  }\n  return options;\n}\n\n\n\n\nexport function isReservedTag(strTag){\n  let reservedTag = 'div,button,a,span,img,p,li,ul,strong,b,i,del';\n  // 源码根据 \"，\" 生成映射表，{a:true,div:true,span:true}\n  return reservedTag.includes(strTag);\n}","import { mergeOptions } from \"../utils\";\n\nexport function initGlobalAPI(Vue){\n    // 存放全局的配置，每个组件初始化的时候，都会和options选项进行合并\n    Vue.options = {}; \n    // Vue.component\n    // Vue.directive\n    // Vue.filter\n    Vue.mixin = function(options){\n        // vue默认的选项和用户传入的选项进行合并\n        // this.options是空对象， 传进来的options={beforeCreated:Fn} =>{beforeCreated:[fn]}\n        // 下一次调用Vue.mixin = {beforeCreated:[fn,fn1]} ---> 合并到数组里\n        this.options = mergeOptions(this.options, options);\n        return this; // 这里的this指向Vue\n    }\n\n\n\n    // 无论后续创建多少个子类，都可以通过_base找到父类(Vue)\n    Vue.options._base = Vue \n    Vue.options.components = {}\n    // 全局组件定义\n    /**\n     * @param {*} id 组件名称\n     * @param {*} definition 组件对象\n     */\n    Vue.component = function(id,definition){\n        // 保证组件的隔离，每个组件都会产生一个新的类，去继承父类\n        definition = this.options._base.extend(definition)\n        // 将子类挂载到Vue.options.components 中\n        this.options.components[id] = definition\n    }\n\n    // extend 方法就是产生一个继承Vue的类，并且身上应该有父类的功能\n    // 给一个对象返回类\n    Vue.extend = function(options){ \n        const Super = this; // this -> Vue\n        const Sub = function VueComponent(opts){ \n            this._init(opts);\n        }\n        // 原型继承\n        // Super.prototype -> Vue的原型\n        Sub.prototype = Object.create(Super.prototype);\n        Sub.prototype.constructor = Sub; \n        // 这样就包含了全局的和用户传递的\n        // vue.options和用户的options进行合并给到Sub.options\n        Sub.options = mergeOptions(Super.options,options) // 只是和Vue.options合并\n        return Sub;\n    }\n}\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\n// _c(\"div\",{id:'app'},'你好')\nexport function generate(el){\n    // 遍历树，将树拼接成字符串\n    let children = genChildren(el);\n    let code = `_c('${el.tag}',\n        ${ el.attrs.length ? genProps(el.attrs) : 'undefined' }\n        ${children?`,${children}`:''})`\n    return code\n}\n\n// 生成子元素\nfunction gen(el){\n    if(el.type == 1){\n        return generate(el)\n    }else {\n        let text = el.text\n        if(!defaultTagRE.test(text)){\n            return `_v('${text}')`;\n        }else{\n            // hello {{arr}} world  转换成  'hello'+ arr+ 'world'\n            let tokens = [];\n            let match;\n            let lastIndex = defaultTagRE.lastIndex = 0;\n\n            // 看有没有匹配到\n            while (match = defaultTagRE.exec(text)) {\n                let index = match.index; // 开始索引\n                if(index > lastIndex){\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n                }\n                // _c,_v,_s \n                // _c：创建一个元素\n                // _v：里面包含的是一个文本\n                // _s：里面是一个变量，使用JSON.string转换一下\n                // JSON.stringfy 目的，这里的{{arr}} arr变量可能是对象，\n                // 需要进行JSON.stringfy,不然转隐式化过来就是[object Object]\n                tokens.push(`_s(${match[1].trim()})`) \n                lastIndex = index + match[0].length\n            }\n            if(lastIndex < text.length){\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\n            }\n            return `_v(${tokens.join('+')})`\n        }\n\n    }\n}\n\nfunction genChildren(el){\n    let children = el.children // 获取children\n    if(children){\n    // _c(\"div\",{id:'app'},_c(\"div\",{id:'ccc'}),_v())\n    // _v： 代表创建一个文本\n        return children.map(child=>gen(child)).join(',')\n    }\n    return false\n}\n\n// el中的attrs ---> [{'name':'xxx','id':'app'},{'class':'a'}]\nfunction genProps(attrs){ \n    let str = ``;\n    for (let i = 0; i < attrs.length; i++) {\n        const attr = attrs[i];\n        if(attr.name ==='style'){\n            // color:red;background:pink\n            let styleObj = {}  // {color: 'red', background: 'pink'}\n            attr.value.replace(/([^;:]+)\\:([^;:]+)/g,function(){\n                styleObj[arguments[1]] = arguments[2]\n            })\n            attr.value = styleObj\n        }\n        str+= `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}` // str.slice(0,-1) 原因是要去掉最后一位的逗号\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\n// html = <div id=\"app\"></div>\nexport function parseHTML(html) {\n\n  // 构造AST语法树\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs,\n  };\n}\n\nlet root = null; //树根\nlet stack = [];\n// 开始标签\nfunction start(tagName, attributes) {\n  let parent = stack[stack.length - 1];\n  let element = createAstElement(tagName, attributes);\n  if (!root) {\n    root = element;\n  }\n  if(parent){\n    element.parent = parent; // 当放入栈中的时候记录父级元素\n    parent.children.push(element); // 存放子集元素\n  }\n  stack.push(element);\n}\n// 结束标签\nfunction end(endTagName) {\n  let last = stack.pop();\n  if (last.tag !== endTagName) {\n    // 标签闭合有误\n    throw new SyntaxError(\"标签闭合有误\");\n  }\n}\n// 文本标签\nfunction text(text) {\n  text = text.replace(/\\s/g, \"\");\n  let parent = stack[stack.length - 1];\n  if (parent) {\n    parent.children.push({\n      type: 3,\n      text,\n    });\n  }\n}\n\n\n  // 前进方法\n  function advance(len) {\n    html = html.substring(len);\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      let end;\n      let attr;\n      // 1要有属性 2，不能为开始的结束标签 <div>\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n        advance(attr[0].length);\n      } // <div id=\"app\" a=1 b=2 >\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false;\n  }\n  // 看要解析的内容是否存在，如果存在就不停的解析\n  while (html) {\n    // 解析标签和文本\n    let index = html.indexOf(\"<\");\n    if (index == 0) {\n      // 解析开始标签 并且把属性也解析出来  </div>\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        // 开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch;\n      if ((endTagMatch = html.match(endTag))) {\n        // 结束标签\n        end(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n    }\n    // 文本截取:  {{name}}</div>\n    if (index > 0) {\n      let chars = html.substring(0, index);\n      text(chars);\n      advance(chars.length);\n    }\n  }\n  return root;\n}\n","// HTML解析成DOM树\nimport { generate } from \"./generate\";\nimport { parseHTML } from \"./parser\";\n// <div id=\"app\"> {{name}} </div>\nexport function compilerToFunction(template) {\n  let ast = parseHTML(template);\n\n  // 代码生成\n  const code = generate(ast);\n  // code中可能会用到数据，数据在vm上\n  const render = new Function(`with(this){\n    return ${code}\n  }`)\n  return render\n}\n","\n// 每个属性都分配一个Dep，Dep可以用来存放watcher, watcher存放这个dep\nlet id = 0;\nexport class Dep{ \n    constructor(){\n        this.id = id++\n        this.subs = [] // 用来存放watcher的\n    }\n    depend(){\n        // Dep.target dep里要存放这个watcher, 同样watcher要存放dep 多对多的关系\n        // Dep.target 是watcher\n        if(Dep.target){\n            // watcher 存 dep\n            Dep.target.addDep(this);\n        }\n    }\n    addSub(watcher){\n        this.subs.push(watcher)\n    }\n    notify(){\n        this.subs.forEach(watcher=>{\n            watcher.update(); // 执行get\n        })\n    }\n}\n\nDep.target = null;\nvar stack = []\nexport function pushTarget(wathcer){\n    Dep.target = wathcer;\n    stack.push(wathcer)\n}\nexport function popTarget(){\n    // Dep.target = null\n    stack.pop();\n    Dep.target = stack[stack.length - 1];\n}","import { nextTick } from \"../utils\";\n\nlet queue = [];\nlet has = {}; // 做列表的。列表的维护存放了哪些watcher\n\nfunction flushSchedulerQeue() {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i].run();\n  }\n  // 清空队列,数据更新后保证只更新一次视图\n  queue = [];\n  has = {};\n  pending = false;\n}\n\nlet pending = false;\n// 等待同步代码执行完毕以后，才执行异步逻辑\n// 当前执行栈中代码执行完毕后，会先清空微任务，再清空宏任务\n// 尽早更新页面，$nextTicket\nexport function queueWatcher(watcher) {\n  // 这里watcher进行一次去重，这里每个属性都有一个dep,\n  // dep里又有watcher，所以多次更新操作的时候watcher可能是同一个，要进行去重\n  const id = watcher.id;\n  if (!has[id]) {\n    queue.push(watcher);\n    has[id] = true;\n    // 开启一次更新操作，多次触发queueWatcher 只触发一次nextTick(flushSchedulerQeue)\n    // 如果是同步：可能进来不同的watcher，那么可不止一次调用 nextTick(flushSchedulerQeue)\n    if (!pending) { \n      nextTick(flushSchedulerQeue);\n      pending = true;\n    }\n  }\n}\n","import { popTarget, pushTarget } from \"./dep\";\nimport { queueWatcher } from \"./scheduler\";\n\nlet id = 0; // 标识，当new Watcher的时候id自增\nclass Watcher{\n/**\n * \n * @param {*} vm 实例\n * @param {*} exprOrfn 表达式或者是一个函数\n * @param {*} cb 自定义的回调\n * @param {*} options 是一个标识，可能还是其它的选项\n */\n    constructor(vm,exprOrfn,cb,options){\n        this.vm = vm;\n        this.exprOrfn = exprOrfn;\n        // 看是不是用户watcher\n        this.user = !!options.user\n        this.cb = cb;\n        this.options = options;\n\n        // 看options上有没有lazy属性\n        this.lazy = !!options.lazy;\n        // computed脏值检查\n        // 如果是计算属性，那么默认值lazy为true,dirty也为true\n        this.dirty = options.lazy; \n\n\n        // 判断是不是一个函数？有可能是一个key值\n        if(typeof exprOrfn === 'string'){\n            // 需要将key值转换成函数\n            this.getter = function(){\n                // 当数据取值的时候会进行依赖收集\n                // 会走对应的getter---> 走了getter就会进行依赖收集\n                // 用户有可能使用 'age.n'---> 这种方式定义watch中的处理函数--->需要变成this.vm['age']['n']\n                const path = exprOrfn.split('.')\n                let obj = vm;\n                for (let i = 0; i < path.length; i++) {\n                    obj = obj[path[i]];\n                }\n                return obj; \n            }\n        }else{\n            // 默认让exprOrfn默认执行\n            // exprOrFn 调用了render方法，要去vm上取值\n            this.getter = exprOrfn\n        }\n\n        this.id = id++;\n\n        // 存放dep\n        this.deps = [];\n        this.depsId = new Set();\n\n        // 默认初始化要取值\n        // 第一次的value\n        // this.lazy表示式计算属性，默认不执行getter\n        this.value = this.lazy ? undefined : this.get();\n        // console.log(this.lazy,this.getter)\n    }\n    // 稍后用户更新的时候重新调用get方法\n    get(){ \n        // 取值：会调用Object.defineProperty, 每个属性都可以收集自己的Watcher\n        // 一个属性可以对应多个watcher, 同时一个watcher对应多个属性\n        // 为什么是多对多？ 一个属性可能在多个组件中使用(只要这个属性一变，这多个组件都要更新)，\n        // 一个组件可能有多个属性\n        // Dep.target = Watcher\n        pushTarget(this); \n\n        // 执行这句话的时候会执行render, render会去vm实例上取值\n        //用户watcher: 第一次执行的时候会返回value, 等到set的时候又会走get返回新的值\n        // computed在这里收集watcher的时候是收集的计算属性watcher\n        const value = this.getter();\n        // Dep.target = null; 如果在Dep.target中有值说明在模板中使用了\n        // 用户在外面取值的时候不去收集依赖\n        popTarget(); \n        return value\n    }\n    update() {\n        // this.lazy=true 代表是计算属性watcher\n        if(this.lazy){\n            this.dirty = true\n        }else{\n            // this是 watcher\n            // 每次调用update 将watcher缓存起来，之后一起更新\n            // vue中的更新操作是异步的\n            queueWatcher(this);\n        }\n    }\n    // run 就是执行了updateComponent方法\n    run(){\n        // 新值\n        let newVal = this.get();\n        // 老值\n        let oldVal = this.value \n        this.value = newVal // 为了保证下一次更新的时候，上一次的最新值是下一次的老值\n        if(this.user){\n            // 是用户watcher才会调用watch中的函数\n            this.cb.call(this.vm, newVal,oldVal)\n        }\n    }\n    addDep(dep){\n        let id = dep.id;\n        // 去重操作，防止一个页面上相同的属性使用了多次，从而收集多次watcher\n        if(!this.depsId.has(id)){\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n    evaludate(){\n        // 求值的时候将dirty变成false, 代表已经取过值了  \n        this.dirty = false; // 取值之后就不脏了，缓存起来\n        this.value = this.get(); // 用户的getter执行\n    }\n    depend(){\n        let len = this.deps.length;\n        while (len--) {\n            // 让lastName和firstName收集渲染Watcher\n            this.deps[len].depend(); \n        }\n    }\n}\nexport default Watcher;","// 虚拟DOM比对\nexport function patch(oldVnode, vnode) {\n  if(!oldVnode){\n    return createElm(vnode); // 如果没有el元素，直接根据虚拟节点返回真实节点\n  }\n\n  if (oldVnode.nodeType == 1) {\n    \n    const parentElm = oldVnode.parentNode; \n\n    const element = createElm(vnode); \n    parentElm.insertBefore(element, oldVnode.nextSibling);\n\n    parentElm.removeChild(oldVnode);\n\n    // 这里必须返回用虚拟DOM创建的真实DOM，然后挂载的vm.$el上\n    // parentElm.removeChild(oldVnode); vm.$el中的元素被删除掉了\n    return element;\n  }else{\n    // 如果标签名不一样，直接删掉老的，换成新的\n    console.log(\"oldVnode\",oldVnode)\n    console.log(\"newVnode\",vnode)\n    if(oldVnode.tag != vnode.tag){\n      // 可以通过vnode.el属性。获取现在真实的DOM元素\n      // 使用新的节点替换掉老的节点\n      return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\n    }\n    // 如果两个虚拟节点是文本节点，比较文本内容\n    \n    // 如果标签一样就比较属性，传入新的虚拟节点和老的属性，用新的属性更新老的\n    let el = vnode.el = oldVnode.el; // 表示当前新节点复用老节点\n    patchProps(vnode,oldVnode.data)\n    \n    // 一方有儿子，一方没有儿子\n    let oldChildren = oldVnode.children || []\n    let newChildren = vnode.children || []\n    console.log(oldChildren,newChildren)\n    \n    if(oldChildren.length>0 && newChildren.length>0){\n      // 双方都有儿子\n    }else if(newChildren.length){\n      // 新的有儿子，老的没儿子 \n      for (let i = 0; i < newChildren.length; i++) {\n        // 根据虚拟节点创建真实节点\n        // 循环创建新节点\n        const child = createElm(newChildren[i]); \n        el.appendChild(child)\n      }\n    }else if(oldChildren.length){\n      // 老的有儿子，新的没儿子\n      el.innerHTML = ``; // 直接删除老节点\n    }\n    // vue的特点是每个组件都有一个watcher，当前组件中数据变化 只需要更新当组件\n    // 其他情况：双方都没有儿子\n  }\n}\n\n // 初次渲染的时候可以调用此方法，后续更新也可以调用此方法\nfunction patchProps(vnode,oldProps={}){\n  const newProps = vnode.data || {}\n  let el = vnode.el;\n\n  let newStyle = newProps.style || {}\n  let oldStyle = oldProps.style || {}\n\n    // 属性可能有删除的情况\n  for (const key in oldStyle) {\n    if(!newStyle[key]){ // 新的里面不存在这个样式\n      el.style[key] = '';\n    }\n  }\n  // 如果老的属性有，新的没有直接删除\n  for (const key in oldProps) {\n    if(!newProps[key]){\n      el.removeAttribute(key);\n    }\n  }\n  // 直接用新的生成到元素上\n  for (const key in newProps) {\n    if(key === 'style'){\n      for (const styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName]\n      }\n    }else{\n      vnode.el.setAttribute(key,newProps[key])\n    }\n  }\n  vnode.el\n}\n\n\n// 创建真实节点\nfunction createComponent(vnode){\n  let i = vnode.data;\n  if((i = i.hook) && (i = i.init)){\n    i(vnode); // 调用hook.init方法\n  }\n  // 有这个属性说明子组件new完毕了，并且组件对应的真实DOM挂载到了componentInstance.$el上\n  if(vnode.componentInstance){ \n    return true; \n  }\n}\n\nexport function createElm(vnode) {\n  const { tag, data, children, text, vm } = vnode;\n  // tag === 'string' 证明是一个元素\n  // 每个虚拟节点的身上都有el 属性，对应真实节点\n  if (typeof tag === \"string\") {\n    if(createComponent(vnode)){\n      // 返回组件对应的真实节点\n      return vnode.componentInstance.$el;\n    }\n\n    vnode.el = document.createElement(tag);\n\n    // 属性比对\n    patchProps(vnode)\n\n    // 子节点创建\n    // 树的深度遍历，插入子元素\n    children.forEach(child=>{\n        vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    // 文本\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el\n}\n","import Watcher from \"./observer/watcher\";\nimport { nextTick } from \"./utils\";\nimport { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue){\n    Vue.prototype._update = function(vnode){\n        // 既有初始化， 又有更新\n        // patch： diff流程\n        // vnode 利用虚拟节点创建真实节点，替换 $el 中的内容\n        const vm = this;\n        vm.$el = patch(vm.$el, vnode)\n    }\n    // nextTick\n    Vue.prototype.$nextTick = nextTick\n}\n\n// 后续每个组件渲染的时候都会有一个watcher\nexport function mountComponent(vm, el) {\n    // 更新函数，数据变化后还会再次调用此函数\n    let updateComponent = ()=>{\n        // 调用render函数生成虚拟DOM\n        // 调用_update将虚拟DOM变成真实DOM\n        // 后续更新可以调用updateComponet方法\n        vm._update(vm._render());\n    }\n    // 什么是挂载？\n    // 根据render方法生成DOM元素，将id=app里面的内容替换掉，这就叫挂载 \n\n// 视图调用之前\ncallHook(vm,'beforeMount')\n\n\n    // 默认会调用一次\n    // 组件挂载的时候会执行此方法\n    // 属性是被观察者，属性变了通知视图更新\n    // 观察者：刷新页面\n    new Watcher(vm,updateComponent,()=>{\n        console.log(\"更新视图了\")\n    },true) // true这个标识是代表它是一个渲染watcher, 后续有其它的Watcher\n\n    // dom已经挂载\n    callHook(vm,'mounted');\n}\n\n// 钩子函数的调用\nexport function callHook(vm,hook){\n    const handlers = vm.$options[hook];\n    if(handlers){\n        for (let i = 0; i < handlers.length; i++) {\n            handlers[i].call(vm);            \n        }\n    }\n}\n","let oldArrayPrototype = Array.prototype;\nexport let arrayMethods = Object.create(Array.prototype);\n\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    oldArrayPrototype[method].call(this, ...args);\n    let inserted;\n    let ob = this.__ob__;\n    switch (method) {\n      case \"push\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n        break;\n      case \"unshift\":\n        inserted = args;\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n    // ob.dep 就是observer实例 \n    ob.dep.notify()\n  };\n});\n","import { isObject } from \"../utils\";\nimport { arrayMethods } from \"./array\";\nimport { Dep } from \"./dep\";\n\n// 如果给对象新增一个属性不会触发视图更新(给对象本身增加一个dep,dep中存watcher, \n// 如果增加一个属性后，就手动触发watcher更新)\nclass Observer {\n  constructor(data) {\n    data.__ob__ = this;\n\n    // 给Observer实例添加dep属性\n    this.dep = new Dep(); // 数据可能是数组可能是对象\n\n    Object.defineProperty(data,'__ob__',{\n        value: this,\n        enumerable: false\n    })\n\n    if (Array.isArray(data)) {\n        // 数组的变化触发视图更新？\n      data.__proto__ = arrayMethods;\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n  observeArray(data) {\n    // 如果数组里面是对象类型，也做了观测， JSON.stringfy() 也做了收集依赖\n    data.forEach((item) => {\n      observe(item);\n    });\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\n// 数组套数组，进行依赖收集\nfunction dependArray(value){\n  for (let i = 0; i < value.length; i++) {\n    let currentArray = value[i]; \n    currentArray.__ob__ && currentArray.__ob__.dep.depend();\n    // 多维数组\n    if(Array.isArray(currentArray)){\n      dependArray(currentArray)\n    }\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  // childOb 获取的就是Observer实例，Observer实例身上有dep实例，dep在getter的时候收集依赖\n  let childOb = observe(value);\n\n  let dep = new Dep(); \n  Object.defineProperty(data, key, {\n    get() {\n      if(Dep.target){\n        dep.depend()\n        // childOb可能是数组可能是对象，对象也要收集依赖，后续写$set方法的时候需要触发它自己的更新操作\n        if(childOb){ \n          // childOb存的是Observer实例，Observer身上有dep属性, 数组和对象都记录watcher\n          // dep.depend收集watcher, 当数组更新的时候, dep.notify()通知watcher更新视图\n          // 这里只是收集依赖只是收集了最外层的数组\n          childOb.dep.depend()\n          // 数组套数组的情况, 多维数组的情况也要进行依赖收集\n          if(Array.isArray(value)){\n            dependArray(value)\n          }\n        }\n      }\n      return value;\n    },\n    set(newValue) {\n      // 设置的新值有可能还是对象\n      if(newValue !== value){\n        observe(value);\n        value = newValue;\n        dep.notify(); // 告诉当前的属性存放的watcher执行\n      }\n    },\n  });\n}\n\nexport function observe(data) {\n  if (!isObject(data)) {\n    return;\n  }\n  // data.__ob__ 代表已经被观测过了\n  if (data.__ob__) {\n    return data.__ob__;\n  }\n  // 创建一个观测者\n  return new Observer(data);\n}\n","import { Dep } from \"./observer/dep\";\nimport { observe } from \"./observer/index\";\nimport Watcher from \"./observer/watcher\";\nimport { isFunction } from \"./utils\";\n\nexport function stateMxin(Vue){\n  Vue.prototype.$watch = function(key,handler,options={}){\n    options.user = true; // 用户自己写的watcher, 要和渲染watcher区分开\n    // vm,exprOrfn,cb,options\n    const vm = this;\n    // vm, name, 用户回调, options.user\n    let watcher = new Watcher(vm,key,handler,options)\n    // 看是不是立即执行，是则直接调用handler 返回watcher中的value,\n    // 第一次执行只有新值\n    if(options.immediate){\n      handler(watcher.value) \n    }\n  }\n}\n\nexport function initState(vm) {\n  // 状态的初始化\n  const options = vm.$options;\n  // props在data之前\n  if (options.props) {\n  }\n\n  if (options.methods) {\n  }\n\n  if (options.data) {\n    initData(vm);\n  }\n  if (options.computed) {\n    initComputed(vm,options.computed)\n  }\n\n  if (options.watch) {\n    // 用户有watch的时候初始化watch\n    initWatch(vm, options.watch);\n  }\n}\n\n/**\n *\n * @param {*} vm vue实例\n * @param {*} target 去哪里取值\n * @param {*} key key值\n */\nfunction proxy(vm, target, key) {\n  // vm上定义key, vm.xxx的时候帮我们从vm._data.xxx中获取\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newVal) {\n      vm[target][key] = newVal;\n    },\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = isFunction(data) ? data.call(this) : data;\n  // 代理取值\n  for (const key in data) {\n    proxy(vm, \"_data\", key);\n  }\n  // 数据观测\n  observe(data);\n}\n\n// 初始化watch\nfunction initWatch(vm, watch) {\n  for (const key in watch) {\n    const handler = watch[key];\n    if (Array.isArray(handler)) {\n      // 看是不是数组\n      for (let i = 0; i < handler.length; i++) {\n        // handler[i] // 每一个handler函数\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      // handler  // hander函数\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher(vm,key,handler) {\n  return vm.$watch(key,handler)\n}\n\n\n// 初始化computed\nfunction initComputed(vm,computed){ \n  const watcher = vm._computedWatchers = {}\n  for (const key in computed) {\n    // userDefine 这里取到的值有可能是对象有可能是函数\n    const userDefine = computed[key];\n    // 依赖的属性变化了就重新取值 (get)\n    let getter = typeof userDefine === 'function'? userDefine : userDefine.get\n    // 每个计算属性本质就是watcher\n    // lazy:true 表示默认不执行 (computed中的函数默认不执行)\n    // watcher[key] 每个属性对应一个watcher, watcher和属性 做一个映射\n    // computed中有多少个计算属性，就有多少个watcher\n    watcher[key] = new Watcher(vm,getter.bind(vm),()=>{},{lazy:true })\n    // 将key 定义在vm上\n    definedComputed(vm,key,userDefine)\n  }\n}\n\nfunction definedComputed(vm,key,userDefine){\n  let sharedProperty = {}\n  // 判断userDefine是不是一个函数，\n  // userDefine表示computed中定义的计算属性可能是函数，可能是对象\n  if(typeof userDefine === 'function'){\n    sharedProperty.get = userDefine\n  }else{\n    sharedProperty.get = createComputedGetter(key);\n    sharedProperty.set = userDefine.set || (()=>{});\n  }\n  // computed就是一个defineProperty\n  Object.defineProperty(vm,key, sharedProperty)\n}\n\nfunction createComputedGetter(key){\n  // 取计算属性的值走的是这个函数\n  return function computedGetter(){\n    // this._computedWatchers包含所有的计算属性\n    // 通过key可以拿到对应的watcher\n    let watcher = this._computedWatchers[key]\n    if(watcher.dirty){ // 根据diry属性，来判断是否需要重新求值\n      // 如果这个 watcher.dirty 是脏的，就取一次值\n      watcher.evaludate();\n    } \n    // 如果当前取完值后，Dep.target还有值 需要继续向上收集\n    if(Dep.target){\n      // 让当前的计算属性也做一次依赖收集，Watcher里对应了多个dep\n      // 计算属性watcher内部有两个dep，firstName和lastName\n      watcher.depend(); \n    }\n    // 缓存的值\n    return watcher.value\n  }\n}","import { compilerToFunction } from \"./compiler/index\";\nimport { callHook, mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\nimport { mergeOptions } from './utils'\n\n// 表示在vue的基础上做一次混合的操作\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // el 和 data\n    const vm = this;\n\n    // 谁调用就指向谁的构造器\n    vm.$options = mergeOptions(vm.constructor.options, options); // 后续对options进行扩展\n    // 数据初始化之前调用beforeCreated\n    callHook(vm,'beforeCreate'); \n\n    // 对数据进行初始化 watch,props,computed,data ...\n    initState(vm); // vm.$options.data  vm.$options.computed ...\n\n    // 数据初始化之后执行created方法\n    callHook(vm,'created');\n\n    // 看用户的实例上有没有el这样的属性\n    // 有el属性就调用 vm.$mount\n    // 没有 el 属性就是 new Vue().$mount('el')\n    if (vm.$options.el) {\n      // 将数据挂载到这个模板上\n      vm.$mount(vm.$options.el);\n    }\n  };\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    el = document.querySelector(el);\n    vm.$el = el;\n    const options = vm.$options;\n    /**\n     * 把模板转换转换成对应的渲染函数，还可以引入虚拟DOM的概念，\n     * 通过渲染函数产生虚拟节点，用户更新数据了，更新虚拟DOM，\n     * 最后再产生真实节点去更新视图\n     */\n    if (!vm.$options.render) {\n      // 没有render就使用template\n      let template = options.template;\n      if (!template && el) {\n        // 用户没有传递template就取el的内容作为模板\n        template = el.outerHTML;\n      }\n      const render = compilerToFunction(template)\n      // options.render就是渲染函数\n      // 谁调用render render中的 with(this) 就指向谁\n      options.render = render\n    }\n    // options.render就是渲染函数\n    // 调用render方法，最终渲染成真实DOM，替换掉页面的内容\n    \n    // 组件的挂载流程\n    // 将组件实例，挂载到el元素上\n    mountComponent(vm, el);\n  };\n}\n","import { isObject, isReservedTag } from \"../utils\";\n\nexport function createElement(vm, tag, data = {}, ...children) {\n\n  // 如果tag是组件 应该渲染一个组件的vnode\n  // isReservedTag 看是不是原生标签\n  if(isReservedTag(tag)){\n    return vnode(tag, data, data.key, children, undefined, vm);\n  }else{\n    const Ctor = vm.$options.components[tag]\n    return createComponent(tag, data, data.key, children, Ctor,vm);\n  }\n}\n// 创建组件的虚拟节点, 为了区分组件和元素 data.hook | componentOptions\nfunction createComponent(tag, data, key, children, Ctor,vm){\n  // 组件的构造函数\n  if(isObject(Ctor)){\n    Ctor = vm.$options._base.extend(Ctor) // Vue.$options._base = Vue\n  }\n  data.hook = { // 等会渲染组件的时候，需要初始化此方法\n    init(vnode){\n      // 初始化组件\n      // new Sub 会用此选项和组件的配置进行合并\n      let vm = vnode.componentInstance = new Ctor({_isComponent:true}); \n      vm.$mount() // 组件挂载完成后 会在vm.$el => <template><button></button></template>\n    }\n  }\n  return vnode(`vue-component-${tag}`,data,key,undefined,undefined,{Ctor,children},vm)\n}\n\nexport function createTextElement(vm, text) {\n  return vnode(undefined, undefined, undefined, undefined, text, vm);\n}\n\n// 创建虚拟DOM\n// componentOptions 组件的选项\nfunction vnode(tag, data, key, children, text,componentOptions, vm) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    vm,\n    // ...\n  };\n}\n","import { createElement, createTextElement } from \"./vdom/index\"\n\nexport function renderMixin(Vue){\n    // 元素，数据，孩子\n    // createElement\n    Vue.prototype._c = function(tagName,data,...children){\n        const vm = this \n        return createElement(vm,...arguments)\n    }\n    // 文本\n    // createTextElement\n    Vue.prototype._v = function(text){\n        const vm = this \n        return createTextElement(vm,text)\n    }\n    // 变量\n    Vue.prototype._s = function(val){   \n        return typeof val === 'object'? JSON.stringify(val):val\n    }\n\n    Vue.prototype._render = function(){\n        \n        const vm = this;\n\n        // 这里的render就是挂载到用户选项上的render，同时也有可能是用户写的\n        const render = vm.$options.render\n        // 调用render生成虚拟DOM\n        const vnode = render.call(vm)\n        return vnode;\n    }\n}","import { initGlobalAPI } from \"./global-api/index\";\nimport { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./render\";\nimport { stateMxin } from \"./state\";\n\nfunction Vue(options){\n    // options为用户传入的选项\n    this._init(options); // 初始化操作\n}\ninitMixin(Vue);\nrenderMixin(Vue); // _render\nlifecycleMixin(Vue); // _update\nstateMxin(Vue); // 状态混入\n\n// 在类上扩展\n// 初始化全局API\ninitGlobalAPI(Vue);\n\n\nimport {compilerToFunction} from './compiler/index'\nimport {createElm, patch} from './vdom/patch'\n// diff核心\nlet oldTemplate = `<div  style=\"color:green\">{{message}}</div>`\nlet vm1 = new Vue({data:{message:\"hello\"}});\n\nconst render1 = compilerToFunction(oldTemplate);\nconst oldVnode = render1.call(vm1); // 虚拟dom\n// 真实节点\ndocument.body.appendChild(createElm(oldVnode))\n\nlet newTemplate = `<div></div>`\nconst vm2 = new Vue({data:{message:'zf'}})\nconst render2 = compilerToFunction(newTemplate); // 虚拟节点\nconst newVnode = render2.call(vm2); // 虚拟dom\ndocument.body.appendChild(createElm(newVnode))\n// 根据新的虚拟节点更新老的节点，老节点能复用尽量复用\nsetTimeout(()=>{\n    patch(oldVnode,newVnode)\n},2000)\n\n\nexport default Vue;"],"names":["isFunction","val","isObject","callbacks","flushCallback","forEach","cb","waiting","timer","timerFn","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","push","lifecycleHooks","strats","hook","mergeHook","components","parentVal","childVal","options","Object","create","key","concat","mergeOptions","parentOptions","childOptions","mergeFild","hasOwnProperty","isReservedTag","strTag","reservedTag","includes","initGlobalAPI","Vue","mixin","_base","component","id","definition","extend","Super","Sub","VueComponent","opts","_init","prototype","constructor","defaultTagRE","generate","el","children","genChildren","code","tag","attrs","length","genProps","gen","type","text","test","tokens","match","lastIndex","exec","index","JSON","stringify","slice","trim","join","map","child","str","i","attr","name","styleObj","value","replace","arguments","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createAstElement","tagName","parent","root","stack","start","attributes","element","end","endTagName","last","pop","SyntaxError","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","chars","compilerToFunction","template","ast","render","Function","Dep","subs","target","addDep","watcher","update","pushTarget","wathcer","popTarget","queue","has","flushSchedulerQeue","run","pending","queueWatcher","Watcher","vm","exprOrfn","user","lazy","dirty","getter","path","split","obj","deps","depsId","Set","undefined","get","newVal","oldVal","call","dep","add","addSub","depend","patch","oldVnode","vnode","createElm","nodeType","parentElm","parentNode","insertBefore","nextSibling","removeChild","console","log","replaceChild","patchProps","data","oldChildren","newChildren","appendChild","innerHTML","oldProps","newProps","newStyle","style","oldStyle","removeAttribute","styleName","setAttribute","createComponent","init","componentInstance","$el","createElement","lifecycleMixin","_update","$nextTick","mountComponent","updateComponent","_render","callHook","handlers","$options","oldArrayPrototype","Array","arrayMethods","methods","method","args","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","isArray","__proto__","walk","item","keys","defineReactive","dependArray","currentArray","childOb","set","newValue","stateMxin","$watch","handler","immediate","initState","props","initData","computed","initComputed","watch","initWatch","proxy","_data","createWatcher","_computedWatchers","userDefine","bind","definedComputed","sharedProperty","createComputedGetter","computedGetter","evaludate","initMixin","$mount","querySelector","outerHTML","Ctor","_isComponent","createTextElement","componentOptions","renderMixin","_c","_v","_s","oldTemplate","vm1","message","render1","body","newTemplate","vm2","render2","newVnode"],"mappings":"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"}